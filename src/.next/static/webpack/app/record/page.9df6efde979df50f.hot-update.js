"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/record/page",{

/***/ "(app-pages-browser)/./services/ui/orderService.ts":
/*!*************************************!*\
  !*** ./services/ui/orderService.ts ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProductionOrder: function() { return /* binding */ createProductionOrder; },\n/* harmony export */   fetchOrderDetail: function() { return /* binding */ fetchOrderDetail; },\n/* harmony export */   fetchOrdersList: function() { return /* binding */ fetchOrdersList; }\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/../node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _shared_schemas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/schemas */ \"(app-pages-browser)/./shared/schemas.ts\");\n/* harmony import */ var _data_dexie_workOrderRepositoryDexie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/dexie/workOrderRepositoryDexie */ \"(app-pages-browser)/./data/dexie/workOrderRepositoryDexie.ts\");\n/* harmony import */ var _data_dexie_eventRepositoryDexie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/dexie/eventRepositoryDexie */ \"(app-pages-browser)/./data/dexie/eventRepositoryDexie.ts\");\n/* harmony import */ var _data_dexie_lotRepositoryDexie__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../data/dexie/lotRepositoryDexie */ \"(app-pages-browser)/./data/dexie/lotRepositoryDexie.ts\");\n/* harmony import */ var _data_dexie_productRepositoryDexie__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../data/dexie/productRepositoryDexie */ \"(app-pages-browser)/./data/dexie/productRepositoryDexie.ts\");\n/* harmony import */ var _data_dexie_operationRepositoryDexie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../data/dexie/operationRepositoryDexie */ \"(app-pages-browser)/./data/dexie/operationRepositoryDexie.ts\");\n/* harmony import */ var _domain_services_aggregation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../domain/services/aggregation */ \"(app-pages-browser)/./domain/services/aggregation.ts\");\n/* harmony import */ var _domain_services_lotProgress__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../domain/services/lotProgress */ \"(app-pages-browser)/./domain/services/lotProgress.ts\");\n/* harmony import */ var _productService__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./productService */ \"(app-pages-browser)/./services/ui/productService.ts\");\n/* harmony import */ var _routingService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routingService */ \"(app-pages-browser)/./services/ui/routingService.ts\");\n/* harmony import */ var _operationService__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./operationService */ \"(app-pages-browser)/./services/ui/operationService.ts\");\n/* harmony import */ var _lotService__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lotService */ \"(app-pages-browser)/./services/ui/lotService.ts\");\n/* harmony import */ var _shared_routingSnapshotSchemas__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../shared/routingSnapshotSchemas */ \"(app-pages-browser)/./shared/routingSnapshotSchemas.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst orderRepo = new _data_dexie_workOrderRepositoryDexie__WEBPACK_IMPORTED_MODULE_1__.ProductionOrderRepositoryDexie();\nconst eventRepo = new _data_dexie_eventRepositoryDexie__WEBPACK_IMPORTED_MODULE_2__.EventRepositoryDexie();\nconst lotRepo = new _data_dexie_lotRepositoryDexie__WEBPACK_IMPORTED_MODULE_3__.LotRepositoryDexie();\nconst productRepo = new _data_dexie_productRepositoryDexie__WEBPACK_IMPORTED_MODULE_4__.ProductRepositoryDexie();\nconst operationRepo = new _data_dexie_operationRepositoryDexie__WEBPACK_IMPORTED_MODULE_5__.OperationRepositoryDexie();\nasync function createProductionOrder(input) {\n    // Validate lotSize if trackingMode != piece\n    if (input.trackingMode !== \"piece\" && (!input.lotSize || input.lotSize <= 0 || input.lotSize > input.quantityRequested)) {\n        throw new Error(\"Lot size is required and must be greater than 0 and less than or equal to target pieces\");\n    }\n    // a) Fetch product by id\n    const product = await (0,_productService__WEBPACK_IMPORTED_MODULE_8__.fetchProductById)(input.productId);\n    if (!product) {\n        throw new Error(\"Product not found\");\n    }\n    // b) Validate that product.activeRoutingVersionId exists\n    if (!product.activeRoutingVersionId) {\n        throw new Error(\"Publish a routing version first\");\n    }\n    // c) Fetch routingVersion active + routingOperations\n    const routingVersion = await (0,_routingService__WEBPACK_IMPORTED_MODULE_9__.fetchRoutingVersionById)(product.activeRoutingVersionId);\n    if (!routingVersion) {\n        throw new Error(\"Active routing version not found\");\n    }\n    if (routingVersion.isDraft) {\n        throw new Error(\"Active routing version is still a draft. Publish it first.\");\n    }\n    const routingOperations = await (0,_routingService__WEBPACK_IMPORTED_MODULE_9__.fetchRoutingOperationsByVersion)(routingVersion.id);\n    if (routingOperations.length === 0) {\n        throw new Error(\"Active routing version has no operations\");\n    }\n    // d) Build routingSnapshot with full operation details\n    const operationsWithDetails = await Promise.all(routingOperations.map(async (ro)=>{\n        const operation = await (0,_operationService__WEBPACK_IMPORTED_MODULE_10__.fetchOperationById)(ro.operationId);\n        if (!operation) {\n            throw new Error(\"Operation \".concat(ro.operationId, \" not found\"));\n        }\n        var _ro_standardMinutesOverride;\n        const standardMinutes = (_ro_standardMinutesOverride = ro.standardMinutesOverride) !== null && _ro_standardMinutesOverride !== void 0 ? _ro_standardMinutesOverride : operation.durationMinutes;\n        var _operation_qualityGate;\n        return {\n            operationId: ro.operationId,\n            sequence: ro.sequence,\n            standardMinutes,\n            operationName: operation.name,\n            qualityGate: (_operation_qualityGate = operation.qualityGate) !== null && _operation_qualityGate !== void 0 ? _operation_qualityGate : false,\n            workCenterId: ro.workCenterIdOverride\n        };\n    }));\n    // Sort by sequence to ensure correct order\n    operationsWithDetails.sort((a, b)=>a.sequence - b.sequence);\n    const routingSnapshot = {\n        id: routingVersion.id,\n        productId: product.id,\n        operations: operationsWithDetails\n    };\n    // e) Create ProductionOrder\n    const workshopId = (0,uuid__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(); // Generate new workshopId for this order\n    const orderId = (0,uuid__WEBPACK_IMPORTED_MODULE_13__[\"default\"])();\n    const order = _shared_schemas__WEBPACK_IMPORTED_MODULE_0__.ProductionOrderSchema.parse({\n        id: orderId,\n        productId: input.productId,\n        quantityRequested: input.quantityRequested,\n        workshopId,\n        routingVersionSnapshot: routingSnapshot,\n        trackingMode: input.trackingMode\n    });\n    // f) Persist via repository\n    await orderRepo.add(order);\n    // g) Create lots if trackingMode != piece\n    if (input.trackingMode !== \"piece\" && input.lotSize) {\n        const lotCount = Math.ceil(input.quantityRequested / input.lotSize);\n        const lots = [];\n        const now = new Date().toISOString();\n        for(let i = 1; i <= lotCount; i++){\n            const isLastLot = i === lotCount;\n            const plannedPieces = isLastLot ? input.quantityRequested - (lotCount - 1) * input.lotSize // Last lot gets remainder\n             : input.lotSize;\n            const lot = _shared_schemas__WEBPACK_IMPORTED_MODULE_0__.LotSchema.parse({\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(),\n                orderId: orderId,\n                lotNumber: i,\n                plannedPieces,\n                createdAt: now\n            });\n            lots.push(lot);\n        }\n        await lotRepo.createMany(lots);\n    }\n    // Create initial WorkEvent (ProductionOrderCreated)\n    const event = _shared_schemas__WEBPACK_IMPORTED_MODULE_0__.WorkEventSchema.parse({\n        id: (0,uuid__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(),\n        type: \"ProductionOrderCreated\",\n        aggregateId: order.id,\n        workshopId: order.workshopId,\n        timestamp: new Date().toISOString(),\n        payload: {\n            quantity: order.quantityRequested\n        },\n        schemaVersion: 1\n    });\n    await eventRepo.append(event);\n    // Enqueue to outbox\n    const outboxRepo = new _data_dexie_eventRepositoryDexie__WEBPACK_IMPORTED_MODULE_2__.OutboxRepositoryDexie();\n    const outboxEvent = _shared_schemas__WEBPACK_IMPORTED_MODULE_0__.OutboxEventSchema.parse({\n        ...event,\n        status: \"pending\"\n    });\n    await outboxRepo.enqueue(outboxEvent);\n    return order;\n}\nasync function fetchOrdersList() {\n    const orders = await orderRepo.listAll();\n    // Note: currently we don't have multi-workshop listing; listing all orders for demo purposes\n    // Fetch all products in one batch to avoid N+1\n    const productIds = [\n        ...new Set(orders.map((o)=>o.productId))\n    ];\n    const products = await Promise.all(productIds.map((id)=>productRepo.getById(id)));\n    const productMap = new Map(products.filter((p)=>p !== undefined).map((p)=>[\n            p.id,\n            p\n        ]));\n    // Batch load all events for all orders in one query (avoid N+1)\n    const orderIds = orders.map((o)=>o.id);\n    const allEvents = await eventRepo.listByAggregateIds(orderIds);\n    // Group events by aggregateId (orderId)\n    const eventsByOrderId = new Map();\n    for (const event of allEvents){\n        var _eventsByOrderId_get;\n        const existing = (_eventsByOrderId_get = eventsByOrderId.get(event.aggregateId)) !== null && _eventsByOrderId_get !== void 0 ? _eventsByOrderId_get : [];\n        existing.push(event);\n        eventsByOrderId.set(event.aggregateId, existing);\n    }\n    // Compute progress for each order using pre-loaded events\n    const vms = orders.map((o)=>{\n        var _eventsByOrderId_get;\n        const events = (_eventsByOrderId_get = eventsByOrderId.get(o.id)) !== null && _eventsByOrderId_get !== void 0 ? _eventsByOrderId_get : [];\n        var _o_routingVersionSnapshot;\n        const progress = (0,_domain_services_aggregation__WEBPACK_IMPORTED_MODULE_6__.computeOrderProgressFromEvents)({\n            id: o.id,\n            quantityRequested: o.quantityRequested\n        }, (_o_routingVersionSnapshot = o.routingVersionSnapshot) !== null && _o_routingVersionSnapshot !== void 0 ? _o_routingVersionSnapshot : {\n            id: \"\",\n            operations: []\n        }, events);\n        const product = productMap.get(o.productId);\n        var _product_name, _o_trackingMode;\n        return {\n            orderId: o.id,\n            productId: o.productId,\n            productName: (_product_name = product === null || product === void 0 ? void 0 : product.name) !== null && _product_name !== void 0 ? _product_name : \"Product (\".concat(o.productId.slice(0, 8), \"...)\"),\n            productSku: product === null || product === void 0 ? void 0 : product.sku,\n            targetPieces: progress.targetPieces,\n            completedPieces: progress.completedPieces,\n            wipPieces: progress.wipPieces,\n            processedPieces: progress.processedPieces,\n            scrapPieces: progress.scrapPieces,\n            completionPercent: progress.completionPercent,\n            trackingMode: (_o_trackingMode = o.trackingMode) !== null && _o_trackingMode !== void 0 ? _o_trackingMode : \"piece\",\n            updatedAt: undefined\n        };\n    });\n    return vms;\n}\nasync function fetchOrderDetail(orderId) {\n    const order = await orderRepo.getById(orderId);\n    if (!order) return null;\n    const events = await eventRepo.listByAggregate(orderId);\n    // Safe-validate routing snapshot\n    const snapshotParseResult = _shared_routingSnapshotSchemas__WEBPACK_IMPORTED_MODULE_12__.RoutingSnapshotSchema.safeParse(order.routingVersionSnapshot);\n    if (!snapshotParseResult.success) {\n        // Invalid snapshot - return error state (UI will handle gracefully)\n        return {\n            order,\n            stages: [],\n            processedPieces: 0,\n            completedPieces: 0,\n            wipPieces: 0,\n            completionPercent: 0,\n            error: \"Invalid routing snapshot\"\n        };\n    }\n    const validatedSnapshot = snapshotParseResult.data;\n    var _validatedSnapshot_productId;\n    // Ensure productId is set (required by aggregation functions)\n    const routingSnapshot = {\n        ...validatedSnapshot,\n        productId: (_validatedSnapshot_productId = validatedSnapshot.productId) !== null && _validatedSnapshot_productId !== void 0 ? _validatedSnapshot_productId : order.productId\n    };\n    // Compute order progress to get correct completionPercent\n    const progress = (0,_domain_services_aggregation__WEBPACK_IMPORTED_MODULE_6__.computeOrderProgressFromEvents)({\n        id: order.id,\n        quantityRequested: order.quantityRequested\n    }, routingSnapshot, events);\n    const stages = (0,_domain_services_aggregation__WEBPACK_IMPORTED_MODULE_6__.computeStageTotalsFromEvents)(routingSnapshot, events);\n    // Fetch operation names to enrich stages\n    const operationIds = [\n        ...new Set(stages.map((s)=>s.operationId))\n    ];\n    const operations = await Promise.all(operationIds.map((id)=>operationRepo.getById(id)));\n    const operationMap = new Map(operations.filter((op)=>op !== undefined).map((op)=>[\n            op.id,\n            op\n        ]));\n    const enrichedStages = stages.map((stage)=>{\n        const operation = operationMap.get(stage.operationId);\n        return {\n            ...stage,\n            operationName: operation === null || operation === void 0 ? void 0 : operation.name\n        };\n    });\n    // Fetch lots if trackingMode != piece and compute progress\n    let lots = undefined;\n    if (order.trackingMode && order.trackingMode !== \"piece\") {\n        const orderLots = await (0,_lotService__WEBPACK_IMPORTED_MODULE_11__.getLotsForOrder)(order.id);\n        if (orderLots.length > 0) {\n            // Build routing operations from snapshot for lot progress calculation\n            const routingOps = routingSnapshot.operations.map((op)=>({\n                    operationId: op.operationId,\n                    sequence: op.sequence\n                }));\n            // Compute lot progress from events\n            const lotProgressMap = (0,_domain_services_lotProgress__WEBPACK_IMPORTED_MODULE_7__.computeLotProgressFromEvents)(orderLots.map((lot)=>({\n                    id: lot.id,\n                    lotNumber: lot.lotNumber,\n                    plannedPieces: lot.plannedPieces\n                })), routingOps, events);\n            // Map to VM format, sorted by lotNumber\n            lots = orderLots.map((lot)=>{\n                const progress = lotProgressMap.get(lot.id);\n                if (!progress) {\n                    // Fallback if progress not found (shouldn't happen)\n                    return {\n                        id: lot.id,\n                        lotNumber: lot.lotNumber,\n                        plannedPieces: lot.plannedPieces,\n                        donePieces: 0,\n                        remainingPieces: lot.plannedPieces,\n                        status: \"not_started\",\n                        overProduced: false,\n                        wipPieces: 0\n                    };\n                }\n                return {\n                    id: progress.lotId,\n                    lotNumber: progress.lotNumber,\n                    plannedPieces: progress.plannedPieces,\n                    donePieces: progress.donePieces,\n                    remainingPieces: progress.remainingPieces,\n                    status: progress.status,\n                    overProduced: progress.overProduced,\n                    wipPieces: progress.wipPieces\n                };\n            }).sort((a, b)=>a.lotNumber - b.lotNumber);\n        }\n    }\n    return {\n        order,\n        stages: enrichedStages,\n        processedPieces: progress.processedPieces,\n        completedPieces: progress.completedPieces,\n        wipPieces: progress.wipPieces,\n        completionPercent: progress.completionPercent,\n        avgStageProgress: progress.avgStageProgress,\n        lots\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NlcnZpY2VzL3VpL29yZGVyU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQztBQUM4RjtBQUN2QztBQUNTO0FBQzNCO0FBQ1E7QUFDSTtBQUM0QjtBQUNoQztBQUM3QjtBQUN3QztBQUNwQztBQUNUO0FBQzZCO0FBRTVFLE1BQU1xQixZQUFZLElBQUlmLGdHQUE4QkE7QUFDcEQsTUFBTWdCLFlBQVksSUFBSWYsa0ZBQW9CQTtBQUMxQyxNQUFNZ0IsVUFBVSxJQUFJZCw4RUFBa0JBO0FBQ3RDLE1BQU1lLGNBQWMsSUFBSWQsc0ZBQXNCQTtBQUM5QyxNQUFNZSxnQkFBZ0IsSUFBSWQsMEZBQXdCQTtBQXlCM0MsZUFBZWUsc0JBQXNCQyxLQUFpQztJQUMzRSw0Q0FBNEM7SUFDNUMsSUFBSUEsTUFBTUMsWUFBWSxLQUFLLFdBQVksRUFBQ0QsTUFBTUUsT0FBTyxJQUFJRixNQUFNRSxPQUFPLElBQUksS0FBS0YsTUFBTUUsT0FBTyxHQUFHRixNQUFNRyxpQkFBaUIsR0FBRztRQUN2SCxNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSx5QkFBeUI7SUFDekIsTUFBTUMsVUFBVSxNQUFNakIsaUVBQWdCQSxDQUFDWSxNQUFNTSxTQUFTO0lBQ3RELElBQUksQ0FBQ0QsU0FBUztRQUNaLE1BQU0sSUFBSUQsTUFBTTtJQUNsQjtJQUVBLHlEQUF5RDtJQUN6RCxJQUFJLENBQUNDLFFBQVFFLHNCQUFzQixFQUFFO1FBQ25DLE1BQU0sSUFBSUgsTUFBTTtJQUNsQjtJQUVBLHFEQUFxRDtJQUNyRCxNQUFNSSxpQkFBaUIsTUFBTW5CLHdFQUF1QkEsQ0FBQ2dCLFFBQVFFLHNCQUFzQjtJQUNuRixJQUFJLENBQUNDLGdCQUFnQjtRQUNuQixNQUFNLElBQUlKLE1BQU07SUFDbEI7SUFDQSxJQUFJSSxlQUFlQyxPQUFPLEVBQUU7UUFDMUIsTUFBTSxJQUFJTCxNQUFNO0lBQ2xCO0lBRUEsTUFBTU0sb0JBQW9C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QVc2QixlQUFlakMsR0FBRyxDQUFDbkMsSUFBSXZDLEVBQUU7Z0JBQzFDLElBQUksQ0FBQzhFLFVBQVU7b0JBQ2Isb0RBQW9EO29CQUNwRCxPQUFPO3dCQUNMOUUsSUFBSXVDLElBQUl2QyxFQUFFO3dCQUNWd0MsV0FBV0QsSUFBSUMsU0FBUzt3QkFDeEJGLGVBQWVDLElBQUlELGFBQWE7d0JBQ2hDc0UsWUFBWTt3QkFDWkMsaUJBQWlCdEUsSUFBSUQsYUFBYTt3QkFDbENnQixRQUFRO3dCQUNSd0QsY0FBYzt3QkFDZHpCLFdBQVc7b0JBQ2I7Z0JBQ0Y7Z0JBQ0EsT0FBTztvQkFDTHJGLElBQUk4RSxTQUFTaUMsS0FBSztvQkFDbEJ2RSxXQUFXc0MsU0FBU3RDLFNBQVM7b0JBQzdCRixlQUFld0MsU0FBU3hDLGFBQWE7b0JBQ3JDc0UsWUFBWTlCLFNBQVM4QixVQUFVO29CQUMvQkMsaUJBQWlCL0IsU0FBUytCLGVBQWU7b0JBQ3pDdkQsUUFBUXdCLFNBQVN4QixNQUFNO29CQUN2QndELGNBQWNoQyxTQUFTZ0MsWUFBWTtvQkFDbkN6QixXQUFXUCxTQUFTTyxTQUFTO2dCQUMvQjtZQUNGLEdBQ0NuRSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRXFCLFNBQVMsR0FBR3BCLEVBQUVvQixTQUFTO1FBQzdDO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xmO1FBQ0FzRSxRQUFRUTtRQUNSakIsaUJBQWlCUixTQUFTUSxlQUFlO1FBQ3pDRixpQkFBaUJOLFNBQVNNLGVBQWU7UUFDekNDLFdBQVdQLFNBQVNPLFNBQVM7UUFDN0JHLG1CQUFtQlYsU0FBU1UsaUJBQWlCO1FBQzdDd0Isa0JBQWtCbEMsU0FBU2tDLGdCQUFnQjtRQUMzQ2hGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zZXJ2aWNlcy91aS9vcmRlclNlcnZpY2UudHM/NTBjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IFByb2R1Y3Rpb25PcmRlciwgUHJvZHVjdGlvbk9yZGVyU2NoZW1hLCBXb3JrRXZlbnRTY2hlbWEsIE91dGJveEV2ZW50U2NoZW1hLCBMb3QsIExvdFNjaGVtYSB9IGZyb20gJy4uLy4uL3NoYXJlZC9zY2hlbWFzJztcbmltcG9ydCB7IFByb2R1Y3Rpb25PcmRlclJlcG9zaXRvcnlEZXhpZSB9IGZyb20gJy4uLy4uL2RhdGEvZGV4aWUvd29ya09yZGVyUmVwb3NpdG9yeURleGllJztcbmltcG9ydCB7IEV2ZW50UmVwb3NpdG9yeURleGllLCBPdXRib3hSZXBvc2l0b3J5RGV4aWUgfSBmcm9tICcuLi8uLi9kYXRhL2RleGllL2V2ZW50UmVwb3NpdG9yeURleGllJztcbmltcG9ydCB7IExvdFJlcG9zaXRvcnlEZXhpZSB9IGZyb20gJy4uLy4uL2RhdGEvZGV4aWUvbG90UmVwb3NpdG9yeURleGllJztcbmltcG9ydCB7IFByb2R1Y3RSZXBvc2l0b3J5RGV4aWUgfSBmcm9tICcuLi8uLi9kYXRhL2RleGllL3Byb2R1Y3RSZXBvc2l0b3J5RGV4aWUnO1xuaW1wb3J0IHsgT3BlcmF0aW9uUmVwb3NpdG9yeURleGllIH0gZnJvbSAnLi4vLi4vZGF0YS9kZXhpZS9vcGVyYXRpb25SZXBvc2l0b3J5RGV4aWUnO1xuaW1wb3J0IHsgY29tcHV0ZU9yZGVyUHJvZ3Jlc3NGcm9tRXZlbnRzLCBjb21wdXRlU3RhZ2VUb3RhbHNGcm9tRXZlbnRzIH0gZnJvbSAnLi4vLi4vZG9tYWluL3NlcnZpY2VzL2FnZ3JlZ2F0aW9uJztcbmltcG9ydCB7IGNvbXB1dGVMb3RQcm9ncmVzc0Zyb21FdmVudHMgfSBmcm9tICcuLi8uLi9kb21haW4vc2VydmljZXMvbG90UHJvZ3Jlc3MnO1xuaW1wb3J0IHsgZmV0Y2hQcm9kdWN0QnlJZCB9IGZyb20gJy4vcHJvZHVjdFNlcnZpY2UnO1xuaW1wb3J0IHsgZmV0Y2hSb3V0aW5nVmVyc2lvbkJ5SWQsIGZldGNoUm91dGluZ09wZXJhdGlvbnNCeVZlcnNpb24gfSBmcm9tICcuL3JvdXRpbmdTZXJ2aWNlJztcbmltcG9ydCB7IGZldGNoT3BlcmF0aW9uQnlJZCB9IGZyb20gJy4vb3BlcmF0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBnZXRMb3RzRm9yT3JkZXIgfSBmcm9tICcuL2xvdFNlcnZpY2UnO1xuaW1wb3J0IHsgUm91dGluZ1NuYXBzaG90U2NoZW1hIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3JvdXRpbmdTbmFwc2hvdFNjaGVtYXMnO1xuXG5jb25zdCBvcmRlclJlcG8gPSBuZXcgUHJvZHVjdGlvbk9yZGVyUmVwb3NpdG9yeURleGllKCk7XG5jb25zdCBldmVudFJlcG8gPSBuZXcgRXZlbnRSZXBvc2l0b3J5RGV4aWUoKTtcbmNvbnN0IGxvdFJlcG8gPSBuZXcgTG90UmVwb3NpdG9yeURleGllKCk7XG5jb25zdCBwcm9kdWN0UmVwbyA9IG5ldyBQcm9kdWN0UmVwb3NpdG9yeURleGllKCk7XG5jb25zdCBvcGVyYXRpb25SZXBvID0gbmV3IE9wZXJhdGlvblJlcG9zaXRvcnlEZXhpZSgpO1xuXG5leHBvcnQgdHlwZSBDcmVhdGVQcm9kdWN0aW9uT3JkZXJJbnB1dCA9IHtcbiAgcHJvZHVjdElkOiBzdHJpbmc7XG4gIHF1YW50aXR5UmVxdWVzdGVkOiBudW1iZXI7XG4gIHRyYWNraW5nTW9kZTogJ3BpZWNlJyB8ICdsb3QnIHwgJ2h5YnJpZCc7XG4gIGxvdFNpemU/OiBudW1iZXI7IC8vIFJlcXVpcmVkIGlmIHRyYWNraW5nTW9kZSAhPSAncGllY2UnXG4gIG5vdGVzPzogc3RyaW5nO1xufTtcblxudHlwZSBSb3V0aW5nU25hcHNob3RPcGVyYXRpb24gPSB7XG4gIG9wZXJhdGlvbklkOiBzdHJpbmc7XG4gIHNlcXVlbmNlOiBudW1iZXI7XG4gIHN0YW5kYXJkTWludXRlczogbnVtYmVyOyAvLyBSZXF1aXJlZCBmb3IgYWdncmVnYXRpb25cbiAgb3BlcmF0aW9uTmFtZT86IHN0cmluZzsgLy8gT3B0aW9uYWw6IGZvciBVSSBkaXNwbGF5XG4gIHF1YWxpdHlHYXRlPzogYm9vbGVhbjsgLy8gT3B0aW9uYWw6IGZvciBmdXR1cmUgdXNlXG4gIHdvcmtDZW50ZXJJZD86IHN0cmluZzsgLy8gT3B0aW9uYWw6IG92ZXJyaWRlXG59O1xuXG50eXBlIFJvdXRpbmdTbmFwc2hvdCA9IHtcbiAgaWQ6IHN0cmluZztcbiAgcHJvZHVjdElkOiBzdHJpbmc7XG4gIG9wZXJhdGlvbnM6IFJvdXRpbmdTbmFwc2hvdE9wZXJhdGlvbltdO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3Rpb25PcmRlcihpbnB1dDogQ3JlYXRlUHJvZHVjdGlvbk9yZGVySW5wdXQpOiBQcm9taXNlPFByb2R1Y3Rpb25PcmRlcj4ge1xuICAvLyBWYWxpZGF0ZSBsb3RTaXplIGlmIHRyYWNraW5nTW9kZSAhPSBwaWVjZVxuICBpZiAoaW5wdXQudHJhY2tpbmdNb2RlICE9PSAncGllY2UnICYmICghaW5wdXQubG90U2l6ZSB8fCBpbnB1dC5sb3RTaXplIDw9IDAgfHwgaW5wdXQubG90U2l6ZSA+IGlucHV0LnF1YW50aXR5UmVxdWVzdGVkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTG90IHNpemUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0YXJnZXQgcGllY2VzJyk7XG4gIH1cbiAgLy8gYSkgRmV0Y2ggcHJvZHVjdCBieSBpZFxuICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgZmV0Y2hQcm9kdWN0QnlJZChpbnB1dC5wcm9kdWN0SWQpO1xuICBpZiAoIXByb2R1Y3QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2R1Y3Qgbm90IGZvdW5kJyk7XG4gIH1cblxuICAvLyBiKSBWYWxpZGF0ZSB0aGF0IHByb2R1Y3QuYWN0aXZlUm91dGluZ1ZlcnNpb25JZCBleGlzdHNcbiAgaWYgKCFwcm9kdWN0LmFjdGl2ZVJvdXRpbmdWZXJzaW9uSWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1B1Ymxpc2ggYSByb3V0aW5nIHZlcnNpb24gZmlyc3QnKTtcbiAgfVxuXG4gIC8vIGMpIEZldGNoIHJvdXRpbmdWZXJzaW9uIGFjdGl2ZSArIHJvdXRpbmdPcGVyYXRpb25zXG4gIGNvbnN0IHJvdXRpbmdWZXJzaW9uID0gYXdhaXQgZmV0Y2hSb3V0aW5nVmVyc2lvbkJ5SWQocHJvZHVjdC5hY3RpdmVSb3V0aW5nVmVyc2lvbklkKTtcbiAgaWYgKCFyb3V0aW5nVmVyc2lvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignQWN0aXZlIHJvdXRpbmcgdmVyc2lvbiBub3QgZm91bmQnKTtcbiAgfVxuICBpZiAocm91dGluZ1ZlcnNpb24uaXNEcmFmdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQWN0aXZlIHJvdXRpbmcgdmVyc2lvbiBpcyBzdGlsbCBhIGRyYWZ0LiBQdWJsaXNoIGl0IGZpcnN0LicpO1xuICB9XG5cbiAgY29uc3Qgcm91dGluZ09wZXJhdGlvbnMgPSBhd2FpdCBmZXRjaFJvdXRpbmdPcGVyYXRpb25zQnlWZXJzaW9uKHJvdXRpbmdWZXJzaW9uLmlkKTtcbiAgaWYgKHJvdXRpbmdPcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQWN0aXZlIHJvdXRpbmcgdmVyc2lvbiBoYXMgbm8gb3BlcmF0aW9ucycpO1xuICB9XG5cbiAgLy8gZCkgQnVpbGQgcm91dGluZ1NuYXBzaG90IHdpdGggZnVsbCBvcGVyYXRpb24gZGV0YWlsc1xuICBjb25zdCBvcGVyYXRpb25zV2l0aERldGFpbHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICByb3V0aW5nT3BlcmF0aW9ucy5tYXAoYXN5bmMgKHJvKSA9PiB7XG4gICAgICBjb25zdCBvcGVyYXRpb24gPSBhd2FpdCBmZXRjaE9wZXJhdGlvbkJ5SWQocm8ub3BlcmF0aW9uSWQpO1xuICAgICAgaWYgKCFvcGVyYXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVyYXRpb24gJHtyby5vcGVyYXRpb25JZH0gbm90IGZvdW5kYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YW5kYXJkTWludXRlcyA9IHJvLnN0YW5kYXJkTWludXRlc092ZXJyaWRlID8/IG9wZXJhdGlvbi5kdXJhdGlvbk1pbnV0ZXM7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9wZXJhdGlvbklkOiByby5vcGVyYXRpb25JZCxcbiAgICAgICAgc2VxdWVuY2U6IHJvLnNlcXVlbmNlLFxuICAgICAgICBzdGFuZGFyZE1pbnV0ZXMsIC8vIFJlcXVpcmVkIGZvciBhZ2dyZWdhdGlvblxuICAgICAgICBvcGVyYXRpb25OYW1lOiBvcGVyYXRpb24ubmFtZSwgLy8gT3B0aW9uYWw6IGZvciBVSSBkaXNwbGF5XG4gICAgICAgIHF1YWxpdHlHYXRlOiBvcGVyYXRpb24ucXVhbGl0eUdhdGUgPz8gZmFsc2UsIC8vIE9wdGlvbmFsOiBmb3IgZnV0dXJlIHVzZVxuICAgICAgICB3b3JrQ2VudGVySWQ6IHJvLndvcmtDZW50ZXJJZE92ZXJyaWRlLCAvLyBPcHRpb25hbDogb3ZlcnJpZGVcbiAgICAgIH0gYXMgUm91dGluZ1NuYXBzaG90T3BlcmF0aW9uO1xuICAgIH0pXG4gICk7XG5cbiAgLy8gU29ydCBieSBzZXF1ZW5jZSB0byBlbnN1cmUgY29ycmVjdCBvcmRlclxuICBvcGVyYXRpb25zV2l0aERldGFpbHMuc29ydCgoYSwgYikgPT4gYS5zZXF1ZW5jZSAtIGIuc2VxdWVuY2UpO1xuXG4gIGNvbnN0IHJvdXRpbmdTbmFwc2hvdDogUm91dGluZ1NuYXBzaG90ID0ge1xuICAgIGlkOiByb3V0aW5nVmVyc2lvbi5pZCxcbiAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQsXG4gICAgb3BlcmF0aW9uczogb3BlcmF0aW9uc1dpdGhEZXRhaWxzLFxuICB9O1xuXG4gIC8vIGUpIENyZWF0ZSBQcm9kdWN0aW9uT3JkZXJcbiAgY29uc3Qgd29ya3Nob3BJZCA9IHV1aWR2NCgpOyAvLyBHZW5lcmF0ZSBuZXcgd29ya3Nob3BJZCBmb3IgdGhpcyBvcmRlclxuICBjb25zdCBvcmRlcklkID0gdXVpZHY0KCk7XG4gIGNvbnN0IG9yZGVyID0gUHJvZHVjdGlvbk9yZGVyU2NoZW1hLnBhcnNlKHtcbiAgICBpZDogb3JkZXJJZCxcbiAgICBwcm9kdWN0SWQ6IGlucHV0LnByb2R1Y3RJZCxcbiAgICBxdWFudGl0eVJlcXVlc3RlZDogaW5wdXQucXVhbnRpdHlSZXF1ZXN0ZWQsXG4gICAgd29ya3Nob3BJZCxcbiAgICByb3V0aW5nVmVyc2lvblNuYXBzaG90OiByb3V0aW5nU25hcHNob3QsXG4gICAgdHJhY2tpbmdNb2RlOiBpbnB1dC50cmFja2luZ01vZGUsXG4gIH0pO1xuXG4gIC8vIGYpIFBlcnNpc3QgdmlhIHJlcG9zaXRvcnlcbiAgYXdhaXQgb3JkZXJSZXBvLmFkZChvcmRlcik7XG5cbiAgLy8gZykgQ3JlYXRlIGxvdHMgaWYgdHJhY2tpbmdNb2RlICE9IHBpZWNlXG4gIGlmIChpbnB1dC50cmFja2luZ01vZGUgIT09ICdwaWVjZScgJiYgaW5wdXQubG90U2l6ZSkge1xuICAgIGNvbnN0IGxvdENvdW50ID0gTWF0aC5jZWlsKGlucHV0LnF1YW50aXR5UmVxdWVzdGVkIC8gaW5wdXQubG90U2l6ZSk7XG4gICAgY29uc3QgbG90czogTG90W10gPSBbXTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBsb3RDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBpc0xhc3RMb3QgPSBpID09PSBsb3RDb3VudDtcbiAgICAgIGNvbnN0IHBsYW5uZWRQaWVjZXMgPSBpc0xhc3RMb3RcbiAgICAgICAgPyBpbnB1dC5xdWFudGl0eVJlcXVlc3RlZCAtIChsb3RDb3VudCAtIDEpICogaW5wdXQubG90U2l6ZSAvLyBMYXN0IGxvdCBnZXRzIHJlbWFpbmRlclxuICAgICAgICA6IGlucHV0LmxvdFNpemU7XG5cbiAgICAgIGNvbnN0IGxvdCA9IExvdFNjaGVtYS5wYXJzZSh7XG4gICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgb3JkZXJJZDogb3JkZXJJZCxcbiAgICAgICAgbG90TnVtYmVyOiBpLFxuICAgICAgICBwbGFubmVkUGllY2VzLFxuICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcbiAgICAgIH0pO1xuICAgICAgbG90cy5wdXNoKGxvdCk7XG4gICAgfVxuXG4gICAgYXdhaXQgbG90UmVwby5jcmVhdGVNYW55KGxvdHMpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGluaXRpYWwgV29ya0V2ZW50IChQcm9kdWN0aW9uT3JkZXJDcmVhdGVkKVxuICBjb25zdCBldmVudCA9IFdvcmtFdmVudFNjaGVtYS5wYXJzZSh7XG4gICAgaWQ6IHV1aWR2NCgpLFxuICAgIHR5cGU6ICdQcm9kdWN0aW9uT3JkZXJDcmVhdGVkJyxcbiAgICBhZ2dyZWdhdGVJZDogb3JkZXIuaWQsXG4gICAgd29ya3Nob3BJZDogb3JkZXIud29ya3Nob3BJZCxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBwYXlsb2FkOiB7IHF1YW50aXR5OiBvcmRlci5xdWFudGl0eVJlcXVlc3RlZCB9LFxuICAgIHNjaGVtYVZlcnNpb246IDEsXG4gIH0pO1xuICBhd2FpdCBldmVudFJlcG8uYXBwZW5kKGV2ZW50KTtcblxuICAvLyBFbnF1ZXVlIHRvIG91dGJveFxuICBjb25zdCBvdXRib3hSZXBvID0gbmV3IE91dGJveFJlcG9zaXRvcnlEZXhpZSgpO1xuICBjb25zdCBvdXRib3hFdmVudCA9IE91dGJveEV2ZW50U2NoZW1hLnBhcnNlKHtcbiAgICAuLi5ldmVudCxcbiAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgfSk7XG4gIGF3YWl0IG91dGJveFJlcG8uZW5xdWV1ZShvdXRib3hFdmVudCk7XG5cbiAgcmV0dXJuIG9yZGVyO1xufVxuXG5leHBvcnQgdHlwZSBPcmRlcnNMaXN0Vk0gPSB7XG4gIG9yZGVySWQ6IHN0cmluZztcbiAgcHJvZHVjdElkOiBzdHJpbmc7XG4gIHByb2R1Y3ROYW1lOiBzdHJpbmc7XG4gIHByb2R1Y3RTa3U/OiBzdHJpbmc7XG4gIHRhcmdldFBpZWNlczogbnVtYmVyO1xuICBjb21wbGV0ZWRQaWVjZXM6IG51bWJlcjtcbiAgd2lwUGllY2VzOiBudW1iZXI7XG4gIHByb2Nlc3NlZFBpZWNlczogbnVtYmVyO1xuICBzY3JhcFBpZWNlczogbnVtYmVyO1xuICBjb21wbGV0aW9uUGVyY2VudDogbnVtYmVyO1xuICB0cmFja2luZ01vZGU6ICdwaWVjZScgfCAnbG90JyB8ICdoeWJyaWQnO1xuICB1cGRhdGVkQXQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPcmRlcnNMaXN0KCk6IFByb21pc2U8T3JkZXJzTGlzdFZNW10+IHtcbiAgY29uc3Qgb3JkZXJzID0gYXdhaXQgb3JkZXJSZXBvLmxpc3RBbGwoKTtcbiAgLy8gTm90ZTogY3VycmVudGx5IHdlIGRvbid0IGhhdmUgbXVsdGktd29ya3Nob3AgbGlzdGluZzsgbGlzdGluZyBhbGwgb3JkZXJzIGZvciBkZW1vIHB1cnBvc2VzXG4gIFxuICAvLyBGZXRjaCBhbGwgcHJvZHVjdHMgaW4gb25lIGJhdGNoIHRvIGF2b2lkIE4rMVxuICBjb25zdCBwcm9kdWN0SWRzID0gWy4uLm5ldyBTZXQob3JkZXJzLm1hcCgobykgPT4gby5wcm9kdWN0SWQpKV07XG4gIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvZHVjdElkcy5tYXAoKGlkKSA9PiBwcm9kdWN0UmVwby5nZXRCeUlkKGlkKSkpO1xuICBjb25zdCBwcm9kdWN0TWFwID0gbmV3IE1hcChwcm9kdWN0cy5maWx0ZXIoKHApOiBwIGlzIE5vbk51bGxhYmxlPHR5cGVvZiBwPiA9PiBwICE9PSB1bmRlZmluZWQpLm1hcCgocCkgPT4gW3AuaWQsIHBdKSk7XG5cbiAgLy8gQmF0Y2ggbG9hZCBhbGwgZXZlbnRzIGZvciBhbGwgb3JkZXJzIGluIG9uZSBxdWVyeSAoYXZvaWQgTisxKVxuICBjb25zdCBvcmRlcklkcyA9IG9yZGVycy5tYXAoKG8pID0+IG8uaWQpO1xuICBjb25zdCBhbGxFdmVudHMgPSBhd2FpdCBldmVudFJlcG8ubGlzdEJ5QWdncmVnYXRlSWRzKG9yZGVySWRzKTtcbiAgXG4gIC8vIEdyb3VwIGV2ZW50cyBieSBhZ2dyZWdhdGVJZCAob3JkZXJJZClcbiAgY29uc3QgZXZlbnRzQnlPcmRlcklkID0gbmV3IE1hcDxzdHJpbmcsIHR5cGVvZiBhbGxFdmVudHM+KCk7XG4gIGZvciAoY29uc3QgZXZlbnQgb2YgYWxsRXZlbnRzKSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBldmVudHNCeU9yZGVySWQuZ2V0KGV2ZW50LmFnZ3JlZ2F0ZUlkKSA/PyBbXTtcbiAgICBleGlzdGluZy5wdXNoKGV2ZW50KTtcbiAgICBldmVudHNCeU9yZGVySWQuc2V0KGV2ZW50LmFnZ3JlZ2F0ZUlkLCBleGlzdGluZyk7XG4gIH1cblxuICAvLyBDb21wdXRlIHByb2dyZXNzIGZvciBlYWNoIG9yZGVyIHVzaW5nIHByZS1sb2FkZWQgZXZlbnRzXG4gIGNvbnN0IHZtcyA9IG9yZGVycy5tYXAoKG8pID0+IHtcbiAgICBjb25zdCBldmVudHMgPSBldmVudHNCeU9yZGVySWQuZ2V0KG8uaWQpID8/IFtdO1xuICAgIGNvbnN0IHByb2dyZXNzID0gY29tcHV0ZU9yZGVyUHJvZ3Jlc3NGcm9tRXZlbnRzKHsgaWQ6IG8uaWQsIHF1YW50aXR5UmVxdWVzdGVkOiBvLnF1YW50aXR5UmVxdWVzdGVkIH0sIChvLnJvdXRpbmdWZXJzaW9uU25hcHNob3QgYXMgYW55KSA/PyB7IGlkOiAnJywgb3BlcmF0aW9uczogW10gfSwgZXZlbnRzKTtcbiAgICBjb25zdCBwcm9kdWN0ID0gcHJvZHVjdE1hcC5nZXQoby5wcm9kdWN0SWQpO1xuICAgIHJldHVybiB7XG4gICAgICBvcmRlcklkOiBvLmlkLFxuICAgICAgcHJvZHVjdElkOiBvLnByb2R1Y3RJZCxcbiAgICAgIHByb2R1Y3ROYW1lOiBwcm9kdWN0Py5uYW1lID8/IGBQcm9kdWN0ICgke28ucHJvZHVjdElkLnNsaWNlKDAsIDgpfS4uLilgLFxuICAgICAgcHJvZHVjdFNrdTogcHJvZHVjdD8uc2t1LFxuICAgICAgdGFyZ2V0UGllY2VzOiBwcm9ncmVzcy50YXJnZXRQaWVjZXMsXG4gICAgICBjb21wbGV0ZWRQaWVjZXM6IHByb2dyZXNzLmNvbXBsZXRlZFBpZWNlcyxcbiAgICAgIHdpcFBpZWNlczogcHJvZ3Jlc3Mud2lwUGllY2VzLFxuICAgICAgcHJvY2Vzc2VkUGllY2VzOiBwcm9ncmVzcy5wcm9jZXNzZWRQaWVjZXMsXG4gICAgICBzY3JhcFBpZWNlczogcHJvZ3Jlc3Muc2NyYXBQaWVjZXMsXG4gICAgICBjb21wbGV0aW9uUGVyY2VudDogcHJvZ3Jlc3MuY29tcGxldGlvblBlcmNlbnQsXG4gICAgICB0cmFja2luZ01vZGU6IG8udHJhY2tpbmdNb2RlID8/ICdwaWVjZScsIC8vIERlZmF1bHQgdG8gJ3BpZWNlJyBmb3IgbGVnYWN5IG9yZGVyc1xuICAgICAgdXBkYXRlZEF0OiB1bmRlZmluZWRcbiAgICB9IGFzIE9yZGVyc0xpc3RWTTtcbiAgfSk7XG4gIHJldHVybiB2bXM7XG59XG5cbmV4cG9ydCB0eXBlIE9yZGVyRGV0YWlsVk0gPSB7XG4gIG9yZGVyOiBQcm9kdWN0aW9uT3JkZXI7XG4gIHN0YWdlczogQXJyYXk8e1xuICAgIG9wZXJhdGlvbklkOiBzdHJpbmc7XG4gICAgb3BlcmF0aW9uTmFtZT86IHN0cmluZztcbiAgICBzZXF1ZW5jZTogbnVtYmVyO1xuICAgIGRvbmVQaWVjZXM6IG51bWJlcjtcbiAgICBzY3JhcFBpZWNlczogbnVtYmVyO1xuICAgIHN0YW5kYXJkTWludXRlc1Byb2R1Y2VkOiBudW1iZXI7XG4gIH0+O1xuICBwcm9jZXNzZWRQaWVjZXM6IG51bWJlcjtcbiAgY29tcGxldGVkUGllY2VzOiBudW1iZXI7XG4gIHdpcFBpZWNlczogbnVtYmVyO1xuICBjb21wbGV0aW9uUGVyY2VudDogbnVtYmVyO1xuICBhdmdTdGFnZVByb2dyZXNzPzogbnVtYmVyO1xuICBsb3RzPzogQXJyYXk8e1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbG90TnVtYmVyOiBudW1iZXI7XG4gICAgcGxhbm5lZFBpZWNlczogbnVtYmVyO1xuICAgIGRvbmVQaWVjZXM6IG51bWJlcjtcbiAgICByZW1haW5pbmdQaWVjZXM6IG51bWJlcjtcbiAgICBzdGF0dXM6ICdub3Rfc3RhcnRlZCcgfCAnaW5fcHJvZ3Jlc3MnIHwgJ2RvbmUnO1xuICAgIG92ZXJQcm9kdWNlZDogYm9vbGVhbjtcbiAgICB3aXBQaWVjZXM/OiBudW1iZXI7XG4gIH0+O1xuICBlcnJvcj86IHN0cmluZzsgLy8gRm9yIGludmFsaWQgc25hcHNob3QgZXJyb3JzXG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPcmRlckRldGFpbChvcmRlcklkOiBzdHJpbmcpOiBQcm9taXNlPE9yZGVyRGV0YWlsVk0gfCBudWxsPiB7XG4gIGNvbnN0IG9yZGVyID0gYXdhaXQgb3JkZXJSZXBvLmdldEJ5SWQob3JkZXJJZCk7XG4gIGlmICghb3JkZXIpIHJldHVybiBudWxsO1xuICBjb25zdCBldmVudHMgPSBhd2FpdCBldmVudFJlcG8ubGlzdEJ5QWdncmVnYXRlKG9yZGVySWQpO1xuICBcbiAgLy8gU2FmZS12YWxpZGF0ZSByb3V0aW5nIHNuYXBzaG90XG4gIGNvbnN0IHNuYXBzaG90UGFyc2VSZXN1bHQgPSBSb3V0aW5nU25hcHNob3RTY2hlbWEuc2FmZVBhcnNlKG9yZGVyLnJvdXRpbmdWZXJzaW9uU25hcHNob3QpO1xuICBpZiAoIXNuYXBzaG90UGFyc2VSZXN1bHQuc3VjY2Vzcykge1xuICAgIC8vIEludmFsaWQgc25hcHNob3QgLSByZXR1cm4gZXJyb3Igc3RhdGUgKFVJIHdpbGwgaGFuZGxlIGdyYWNlZnVsbHkpXG4gICAgcmV0dXJuIHtcbiAgICAgIG9yZGVyLFxuICAgICAgc3RhZ2VzOiBbXSxcbiAgICAgIHByb2Nlc3NlZFBpZWNlczogMCxcbiAgICAgIGNvbXBsZXRlZFBpZWNlczogMCxcbiAgICAgIHdpcFBpZWNlczogMCxcbiAgICAgIGNvbXBsZXRpb25QZXJjZW50OiAwLFxuICAgICAgZXJyb3I6ICdJbnZhbGlkIHJvdXRpbmcgc25hcHNob3QnLFxuICAgIH0gYXMgT3JkZXJEZXRhaWxWTSAmIHsgZXJyb3I/OiBzdHJpbmcgfTtcbiAgfVxuICBjb25zdCB2YWxpZGF0ZWRTbmFwc2hvdCA9IHNuYXBzaG90UGFyc2VSZXN1bHQuZGF0YTtcbiAgLy8gRW5zdXJlIHByb2R1Y3RJZCBpcyBzZXQgKHJlcXVpcmVkIGJ5IGFnZ3JlZ2F0aW9uIGZ1bmN0aW9ucylcbiAgY29uc3Qgcm91dGluZ1NuYXBzaG90ID0ge1xuICAgIC4uLnZhbGlkYXRlZFNuYXBzaG90LFxuICAgIHByb2R1Y3RJZDogdmFsaWRhdGVkU25hcHNob3QucHJvZHVjdElkID8/IG9yZGVyLnByb2R1Y3RJZCxcbiAgfTtcbiAgXG4gIC8vIENvbXB1dGUgb3JkZXIgcHJvZ3Jlc3MgdG8gZ2V0IGNvcnJlY3QgY29tcGxldGlvblBlcmNlbnRcbiAgY29uc3QgcHJvZ3Jlc3MgPSBjb21wdXRlT3JkZXJQcm9ncmVzc0Zyb21FdmVudHMoXG4gICAgeyBpZDogb3JkZXIuaWQsIHF1YW50aXR5UmVxdWVzdGVkOiBvcmRlci5xdWFudGl0eVJlcXVlc3RlZCB9LFxuICAgIHJvdXRpbmdTbmFwc2hvdCxcbiAgICBldmVudHNcbiAgKTtcbiAgXG4gIGNvbnN0IHN0YWdlcyA9IGNvbXB1dGVTdGFnZVRvdGFsc0Zyb21FdmVudHMocm91dGluZ1NuYXBzaG90LCBldmVudHMpO1xuICBcbiAgLy8gRmV0Y2ggb3BlcmF0aW9uIG5hbWVzIHRvIGVucmljaCBzdGFnZXNcbiAgY29uc3Qgb3BlcmF0aW9uSWRzID0gWy4uLm5ldyBTZXQoc3RhZ2VzLm1hcCgocykgPT4gcy5vcGVyYXRpb25JZCkpXTtcbiAgY29uc3Qgb3BlcmF0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKG9wZXJhdGlvbklkcy5tYXAoKGlkKSA9PiBvcGVyYXRpb25SZXBvLmdldEJ5SWQoaWQpKSk7XG4gIGNvbnN0IG9wZXJhdGlvbk1hcCA9IG5ldyBNYXAob3BlcmF0aW9ucy5maWx0ZXIoKG9wKTogb3AgaXMgTm9uTnVsbGFibGU8dHlwZW9mIG9wPiA9PiBvcCAhPT0gdW5kZWZpbmVkKS5tYXAoKG9wKSA9PiBbb3AuaWQsIG9wXSkpO1xuXG4gIGNvbnN0IGVucmljaGVkU3RhZ2VzID0gc3RhZ2VzLm1hcCgoc3RhZ2UpID0+IHtcbiAgICBjb25zdCBvcGVyYXRpb24gPSBvcGVyYXRpb25NYXAuZ2V0KHN0YWdlLm9wZXJhdGlvbklkKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhZ2UsXG4gICAgICBvcGVyYXRpb25OYW1lOiBvcGVyYXRpb24/Lm5hbWUsXG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggbG90cyBpZiB0cmFja2luZ01vZGUgIT0gcGllY2UgYW5kIGNvbXB1dGUgcHJvZ3Jlc3NcbiAgbGV0IGxvdHM6IE9yZGVyRGV0YWlsVk1bJ2xvdHMnXSA9IHVuZGVmaW5lZDtcbiAgaWYgKG9yZGVyLnRyYWNraW5nTW9kZSAmJiBvcmRlci50cmFja2luZ01vZGUgIT09ICdwaWVjZScpIHtcbiAgICBjb25zdCBvcmRlckxvdHMgPSBhd2FpdCBnZXRMb3RzRm9yT3JkZXIob3JkZXIuaWQpO1xuICAgIGlmIChvcmRlckxvdHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gQnVpbGQgcm91dGluZyBvcGVyYXRpb25zIGZyb20gc25hcHNob3QgZm9yIGxvdCBwcm9ncmVzcyBjYWxjdWxhdGlvblxuICAgICAgY29uc3Qgcm91dGluZ09wcyA9IHJvdXRpbmdTbmFwc2hvdC5vcGVyYXRpb25zLm1hcCgob3A6IHsgb3BlcmF0aW9uSWQ6IHN0cmluZzsgc2VxdWVuY2U6IG51bWJlciB9KSA9PiAoe1xuICAgICAgICBvcGVyYXRpb25JZDogb3Aub3BlcmF0aW9uSWQsXG4gICAgICAgIHNlcXVlbmNlOiBvcC5zZXF1ZW5jZSxcbiAgICAgIH0pKTtcblxuICAgICAgLy8gQ29tcHV0ZSBsb3QgcHJvZ3Jlc3MgZnJvbSBldmVudHNcbiAgICAgIGNvbnN0IGxvdFByb2dyZXNzTWFwID0gY29tcHV0ZUxvdFByb2dyZXNzRnJvbUV2ZW50cyhcbiAgICAgICAgb3JkZXJMb3RzLm1hcCgobG90KSA9PiAoe1xuICAgICAgICAgIGlkOiBsb3QuaWQsXG4gICAgICAgICAgbG90TnVtYmVyOiBsb3QubG90TnVtYmVyLFxuICAgICAgICAgIHBsYW5uZWRQaWVjZXM6IGxvdC5wbGFubmVkUGllY2VzLFxuICAgICAgICB9KSksXG4gICAgICAgIHJvdXRpbmdPcHMsXG4gICAgICAgIGV2ZW50c1xuICAgICAgKTtcblxuICAgICAgLy8gTWFwIHRvIFZNIGZvcm1hdCwgc29ydGVkIGJ5IGxvdE51bWJlclxuICAgICAgbG90cyA9IG9yZGVyTG90c1xuICAgICAgICAubWFwKChsb3QpID0+IHtcbiAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IGxvdFByb2dyZXNzTWFwLmdldChsb3QuaWQpO1xuICAgICAgICAgIGlmICghcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIHByb2dyZXNzIG5vdCBmb3VuZCAoc2hvdWxkbid0IGhhcHBlbilcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGlkOiBsb3QuaWQsXG4gICAgICAgICAgICAgIGxvdE51bWJlcjogbG90LmxvdE51bWJlcixcbiAgICAgICAgICAgICAgcGxhbm5lZFBpZWNlczogbG90LnBsYW5uZWRQaWVjZXMsXG4gICAgICAgICAgICAgIGRvbmVQaWVjZXM6IDAsXG4gICAgICAgICAgICAgIHJlbWFpbmluZ1BpZWNlczogbG90LnBsYW5uZWRQaWVjZXMsXG4gICAgICAgICAgICAgIHN0YXR1czogJ25vdF9zdGFydGVkJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgb3ZlclByb2R1Y2VkOiBmYWxzZSxcbiAgICAgICAgICAgICAgd2lwUGllY2VzOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBwcm9ncmVzcy5sb3RJZCxcbiAgICAgICAgICAgIGxvdE51bWJlcjogcHJvZ3Jlc3MubG90TnVtYmVyLFxuICAgICAgICAgICAgcGxhbm5lZFBpZWNlczogcHJvZ3Jlc3MucGxhbm5lZFBpZWNlcyxcbiAgICAgICAgICAgIGRvbmVQaWVjZXM6IHByb2dyZXNzLmRvbmVQaWVjZXMsXG4gICAgICAgICAgICByZW1haW5pbmdQaWVjZXM6IHByb2dyZXNzLnJlbWFpbmluZ1BpZWNlcyxcbiAgICAgICAgICAgIHN0YXR1czogcHJvZ3Jlc3Muc3RhdHVzLFxuICAgICAgICAgICAgb3ZlclByb2R1Y2VkOiBwcm9ncmVzcy5vdmVyUHJvZHVjZWQsXG4gICAgICAgICAgICB3aXBQaWVjZXM6IHByb2dyZXNzLndpcFBpZWNlcyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5sb3ROdW1iZXIgLSBiLmxvdE51bWJlcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvcmRlcixcbiAgICBzdGFnZXM6IGVucmljaGVkU3RhZ2VzLFxuICAgIHByb2Nlc3NlZFBpZWNlczogcHJvZ3Jlc3MucHJvY2Vzc2VkUGllY2VzLFxuICAgIGNvbXBsZXRlZFBpZWNlczogcHJvZ3Jlc3MuY29tcGxldGVkUGllY2VzLFxuICAgIHdpcFBpZWNlczogcHJvZ3Jlc3Mud2lwUGllY2VzLFxuICAgIGNvbXBsZXRpb25QZXJjZW50OiBwcm9ncmVzcy5jb21wbGV0aW9uUGVyY2VudCxcbiAgICBhdmdTdGFnZVByb2dyZXNzOiBwcm9ncmVzcy5hdmdTdGFnZVByb2dyZXNzLFxuICAgIGxvdHMsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJQcm9kdWN0aW9uT3JkZXJTY2hlbWEiLCJXb3JrRXZlbnRTY2hlbWEiLCJPdXRib3hFdmVudFNjaGVtYSIsIkxvdFNjaGVtYSIsIlByb2R1Y3Rpb25PcmRlclJlcG9zaXRvcnlEZXhpZSIsIkV2ZW50UmVwb3NpdG9yeURleGllIiwiT3V0Ym94UmVwb3NpdG9yeURleGllIiwiTG90UmVwb3NpdG9yeURleGllIiwiUHJvZHVjdFJlcG9zaXRvcnlEZXhpZSIsIk9wZXJhdGlvblJlcG9zaXRvcnlEZXhpZSIsImNvbXB1dGVPcmRlclByb2dyZXNzRnJvbUV2ZW50cyIsImNvbXB1dGVTdGFnZVRvdGFsc0Zyb21FdmVudHMiLCJjb21wdXRlTG90UHJvZ3Jlc3NGcm9tRXZlbnRzIiwiZmV0Y2hQcm9kdWN0QnlJZCIsImZldGNoUm91dGluZ1ZlcnNpb25CeUlkIiwiZmV0Y2hSb3V0aW5nT3BlcmF0aW9uc0J5VmVyc2lvbiIsImZldGNoT3BlcmF0aW9uQnlJZCIsImdldExvdHNGb3JPcmRlciIsIlJvdXRpbmdTbmFwc2hvdFNjaGVtYSIsIm9yZGVyUmVwbyIsImV2ZW50UmVwbyIsImxvdFJlcG8iLCJwcm9kdWN0UmVwbyIsIm9wZXJhdGlvblJlcG8iLCJjcmVhdGVQcm9kdWN0aW9uT3JkZXIiLCJpbnB1dCIsInRyYWNraW5nTW9kZSIsImxvdFNpemUiLCJxdWFudGl0eVJlcXVlc3RlZCIsIkVycm9yIiwicHJvZHVjdCIsInByb2R1Y3RJZCIsImFjdGl2ZVJvdXRpbmdWZXJzaW9uSWQiLCJyb3V0aW5nVmVyc2lvbiIsImlzRHJhZnQiLCJyb3V0aW5nT3BlcmF0aW9ucyIsImlkIiwibGVuZ3RoIiwib3BlcmF0aW9uc1dpdGhEZXRhaWxzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInJvIiwib3BlcmF0aW9uIiwib3BlcmF0aW9uSWQiLCJzdGFuZGFyZE1pbnV0ZXMiLCJzdGFuZGFyZE1pbnV0ZXNPdmVycmlkZSIsImR1cmF0aW9uTWludXRlcyIsInNlcXVlbmNlIiwib3BlcmF0aW9uTmFtZSIsIm5hbWUiLCJxdWFsaXR5R2F0ZSIsIndvcmtDZW50ZXJJZCIsIndvcmtDZW50ZXJJZE92ZXJyaWRlIiwic29ydCIsImEiLCJiIiwicm91dGluZ1NuYXBzaG90Iiwib3BlcmF0aW9ucyIsIndvcmtzaG9wSWQiLCJvcmRlcklkIiwib3JkZXIiLCJwYXJzZSIsInJvdXRpbmdWZXJzaW9uU25hcHNob3QiLCJhZGQiLCJsb3RDb3VudCIsIk1hdGgiLCJjZWlsIiwibG90cyIsIm5vdyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImkiLCJpc0xhc3RMb3QiLCJwbGFubmVkUGllY2VzIiwibG90IiwibG90TnVtYmVyIiwiY3JlYXRlZEF0IiwicHVzaCIsImNyZWF0ZU1hbnkiLCJldmVudCIsInR5cGUiLCJhZ2dyZWdhdGVJZCIsInRpbWVzdGFtcCIsInBheWxvYWQiLCJxdWFudGl0eSIsInNjaGVtYVZlcnNpb24iLCJhcHBlbmQiLCJvdXRib3hSZXBvIiwib3V0Ym94RXZlbnQiLCJzdGF0dXMiLCJlbnF1ZXVlIiwiZmV0Y2hPcmRlcnNMaXN0Iiwib3JkZXJzIiwibGlzdEFsbCIsInByb2R1Y3RJZHMiLCJTZXQiLCJvIiwicHJvZHVjdHMiLCJnZXRCeUlkIiwicHJvZHVjdE1hcCIsIk1hcCIsImZpbHRlciIsInAiLCJ1bmRlZmluZWQiLCJvcmRlcklkcyIsImFsbEV2ZW50cyIsImxpc3RCeUFnZ3JlZ2F0ZUlkcyIsImV2ZW50c0J5T3JkZXJJZCIsImV4aXN0aW5nIiwiZ2V0Iiwic2V0Iiwidm1zIiwiZXZlbnRzIiwicHJvZ3Jlc3MiLCJwcm9kdWN0TmFtZSIsInNsaWNlIiwicHJvZHVjdFNrdSIsInNrdSIsInRhcmdldFBpZWNlcyIsImNvbXBsZXRlZFBpZWNlcyIsIndpcFBpZWNlcyIsInByb2Nlc3NlZFBpZWNlcyIsInNjcmFwUGllY2VzIiwiY29tcGxldGlvblBlcmNlbnQiLCJ1cGRhdGVkQXQiLCJmZXRjaE9yZGVyRGV0YWlsIiwibGlzdEJ5QWdncmVnYXRlIiwic25hcHNob3RQYXJzZVJlc3VsdCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJzdGFnZXMiLCJlcnJvciIsInZhbGlkYXRlZFNuYXBzaG90IiwiZGF0YSIsIm9wZXJhdGlvbklkcyIsInMiLCJvcGVyYXRpb25NYXAiLCJvcCIsImVucmljaGVkU3RhZ2VzIiwic3RhZ2UiLCJvcmRlckxvdHMiLCJyb3V0aW5nT3BzIiwibG90UHJvZ3Jlc3NNYXAiLCJkb25lUGllY2VzIiwicmVtYWluaW5nUGllY2VzIiwib3ZlclByb2R1Y2VkIiwibG90SWQiLCJhdmdTdGFnZVByb2dyZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./services/ui/orderService.ts\n"));

/***/ })

});